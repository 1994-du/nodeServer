import{g,r as v,e as k,j as n,k as l,v as p,w as _,q as i,m as u,n as r,l as S,N as y}from"./index-104000c2.js";import{_ as x}from"./_plugin-vue_export-helper-c27b6911.js";const h=["src"],N={__name:"Set",setup(C){const{proxy:d}=g();let a=v("");const m=s=>{let c=s.target.files[0],e=new FormData;e.append("file",c),e.append("id",JSON.parse(sessionStorage.getItem("token")).id),d.$axios({url:"/api/upload",method:"POST",data:e}).then(t=>{if(t.status=="success"){a.value=t.url;let o=JSON.parse(sessionStorage.getItem("token"));o.avatar=t.url,sessionStorage.setItem("token",JSON.stringify(o))}})},f=function(){document.getElementsByTagName("input")[0].click()};return k(()=>{a.value=JSON.parse(sessionStorage.getItem("token")).avatar}),(s,c)=>{const e=n("el-icon"),t=n("el-form-item"),o=n("el-form");return l(),p(o,null,{default:_(()=>[i(t,{label:"头像"},{default:_(()=>[u("div",{class:"upload_box",onClick:f},[u("input",{ref:"upload",type:"file",style:{display:"none"},onChange:m},null,544),r(a)?(l(),S("img",{key:0,src:r(a),class:"avatar"},null,8,h)):(l(),p(e,{key:1,class:"avatar-uploader-icon"},{default:_(()=>[i(r(y))]),_:1}))])]),_:1})]),_:1})}}},O=x(N,[["__scopeId","data-v-905349a1"]]);export{O as default};

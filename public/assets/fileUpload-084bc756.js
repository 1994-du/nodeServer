import{b as _,j as k,k as a,l as c,q as f,w as p,F as y,s as F,n as x,m as s,x as w,t as v}from"./index-104000c2.js";const C={class:"file_upload"},D=s("h1",null,"文件上传",-1),b=s("h4",null,"window.showDirectoryPicker()打开文件夹选择框",-1),B=["src"],R={__name:"fileUpload",setup(N){let h=_({}),i=_([]);const m=async()=>{try{const e=await window.showDirectoryPicker(),o=await r(e);h=o,o.children.forEach(async l=>{if(l.kind=="file"){const n=await l.getFile();if(console.log(n),n.type==="image/jpeg"){const d=new FileReader;d.readAsDataURL(n),d.onload=u=>{console.log(u),i.push({name:n.name,src:u.target.result})}}}});const t=new FileReader;console.log(t(o))}catch{console.log("拒绝查看")}async function r(e){if(e.kind==="file")return e;e.children=[];const o=e.entries();for await(const t of o)e.children.push(await r(t[1]));return e}},g=()=>{window.showOpenFilePicker()};return(r,e)=>{const o=k("el-button");return a(),c("div",C,[D,b,f(o,{onClick:g},{default:p(()=>[w("打开文件选择框")]),_:1}),f(o,{onClick:m},{default:p(()=>[w("打开文件夹选择框")]),_:1}),(a(!0),c(y,null,F(x(i),t=>(a(),c("div",{key:t+1},[s("img",{src:t.src,alt:""},null,8,B),s("p",null,v(t.name),1)]))),128))])}}};export{R as default};
